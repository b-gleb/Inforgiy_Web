"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[217],{5217:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var n=t(9950),i=t(9500),c=t(9811),s=t(1217),r=t(4414);const l=(0,n.lazy)((()=>t.e(497).then(t.bind(t,8497))));function d(e){let{mode:a,branch:t,initDataUnsafe:d,date:o,timeRange:u,onClose:p,setRotaData:m,handleUpdateCell:h}=e;const[f,b]=(0,n.useState)([]),[w,g]=(0,n.useState)([]),[k,x]=(0,n.useState)(""),[y,A]=(0,n.useState)(null);return(0,n.useEffect)((()=>(window.Telegram.WebApp.BackButton.onClick(p),window.Telegram.WebApp.BackButton.show(),()=>{window.Telegram.WebApp.BackButton.offClick(),window.Telegram.WebApp.BackButton.hide()})),[p]),(0,n.useEffect)((()=>{(0,c.A)(t,d).then((e=>{b(e),g(e)})).catch((()=>{}))}),[t,d]),(0,n.useEffect)((()=>{const e=f.filter((e=>e.nick.toLowerCase().includes(k.toLowerCase())));g(e)}),[k,f]),(0,r.jsx)("div",{className:"popup",children:y?(0,r.jsx)(n.Suspense,{fallback:null,children:(0,r.jsx)(l,{branch:t,editingUser:y,setEditingUser:A,initDataUnsafe:d})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:k,onChange:e=>x(e.target.value),className:"input-field mr-2"}),(0,r.jsx)("button",{onClick:()=>p(),className:"p-2 text-[#007aff] text-xl",children:"\u2715"})]}),"user_management"===a&&(0,r.jsx)("button",{className:"button-primary",onClick:()=>{A({id:null,username:"@",color:0}),window.Telegram.WebApp.HapticFeedback.impactOccurred("medium")},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,r.jsx)("div",{className:"search_results_container",children:w.map((e=>(0,r.jsx)(i.P.button,{initial:{opacity:.5,scale:.9},animate:{opacity:1,scale:1,transition:{ease:"easeOut",duration:.2}},onClick:()=>{"rota"===a?((0,s.A)({type:"add",branch:t,date:o,timeRange:u,modifyUserId:e.id,initDataUnsafe:d}).then((e=>{m(e)})).catch((()=>{})),window.Telegram.WebApp.HapticFeedback.impactOccurred("light"),p()):"user_management"===a?(A(e),window.Telegram.WebApp.HapticFeedback.impactOccurred("light")):"rota_weekly"===a&&h({type:"add",branch:t,modifyUserId:e.id,initDataUnsafe:d}).then((()=>{window.Telegram.WebApp.HapticFeedback.impactOccurred("light"),p()})).catch((()=>{}))},className:"search_results_button",children:e.nick},e.id)))})]})})}},9811:(e,a,t)=>{t.d(a,{A:()=>s});var n=t(9246),i=t(9492);const c="https://inforgiy-server.fly.dev";async function s(e,a){try{return(await n.A.get(`${c}/api/users`,{params:{branch:e,initDataUnsafe:a}})).data}catch(t){throw(0,i.A)(t),t}}}}]);