"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[662],{8662:(e,t,l)=>{l.r(t),l.d(t,{default:()=>i});var a=l(9950),n=l(3406),r=l(9246),s=l(9492),d=l(4414);const u="https://inforgiy-server.fly.dev";function i(e){var t,l,i,y,c,v;let{branch:g,user_id:x}=e;const[b,h]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=new Date,t=e=>{const t=new Date(e);t.setDate(e.getDate()-(0===e.getDay()?6:e.getDay()-1));const l=new Date(t);return l.setDate(t.getDate()+6),[t,l]},l=e=>[new Date(e.getFullYear(),e.getMonth(),1),new Date(e.getFullYear(),e.getMonth()+1,0)],a=t(e),d=t(new Date(e.getTime()-6048e5)),i=l(e),o=l(new Date(e.getFullYear(),e.getMonth()-1,e.getDate())),y=(c=e,[new Date(c.getFullYear(),0,1),new Date(c.getFullYear(),11,31)]);var c;(async()=>{try{const e=await r.A.post(`${u}/api/stats`,{branch:g,user_ids:[x],dateRanges:[[(0,n.GP)(a[0],"yyyy-MM-dd"),(0,n.GP)(a[1],"yyyy-MM-dd")],[(0,n.GP)(d[0],"yyyy-MM-dd"),(0,n.GP)(d[1],"yyyy-MM-dd")],[(0,n.GP)(i[0],"yyyy-MM-dd"),(0,n.GP)(i[1],"yyyy-MM-dd")],[(0,n.GP)(o[0],"yyyy-MM-dd"),(0,n.GP)(o[1],"yyyy-MM-dd")],[(0,n.GP)(y[0],"yyyy-MM-dd"),(0,n.GP)(y[1],"yyyy-MM-dd")]]}),t=Object.values(e.data)[0];h({currentWeek:t[0].count,previousWeek:t[1].count,currentMonth:t[2].count,previousMonth:t[3].count,currentYear:t[4].count})}catch(e){(0,s.A)(e)}})()}),[g,x]),(0,d.jsxs)("div",{className:"flex flex-wrap justify-evenly py-2 bg-gray-100 dark:bg-neutral-900",children:[(0,d.jsx)(o,{label:"\u041d\u0435\u0434\u0435\u043b\u044f",sublabel:"\u043e\u0442 \u043f\u0440\u043e\u0448\u043b\u043e\u0439",current:null!==(t=null===b||void 0===b?void 0:b.currentWeek)&&void 0!==t?t:null,previous:null!==(l=null===b||void 0===b?void 0:b.previousWeek)&&void 0!==l?l:null}),(0,d.jsx)(o,{label:"\u041c\u0435\u0441\u044f\u0446",sublabel:"\u043e\u0442 \u043f\u0440\u043e\u0448\u043b\u043e\u0433\u043e",current:null!==(i=null===b||void 0===b?void 0:b.currentMonth)&&void 0!==i?i:null,previous:null!==(y=null===b||void 0===b?void 0:b.previousMonth)&&void 0!==y?y:null}),(0,d.jsx)(o,{label:"\u0413\u043e\u0434",sublabel:"\u043e\u0442 \u043f\u0440\u043e\u0448\u043b\u043e\u0433\u043e",current:null!==(c=null===b||void 0===b?void 0:b.currentYear)&&void 0!==c?c:null,previous:null!==(v=null===b||void 0===b?void 0:b.previousYear)&&void 0!==v?v:null})]})}const o=e=>{let{label:t,sublabel:l,current:a,previous:n}=e;const r=void 0!==n&&null!==n,s=r&&a>n,u=r?a-n:0;return(0,d.jsxs)("div",{className:"rounded-2xl shadow-md p-2 w-1/4 bg-white dark:bg-neutral-800",children:[(0,d.jsx)("h3",{className:"text-base font-semibold mb-2 text-gray-500 dark:text-gray-400",children:t}),null===a?(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"h-10 rounded-sm w-3/4 mb-2 bg-gray-200 dark:bg-neutral-700"}),(0,d.jsx)("div",{className:"h-4 rounded-sm w-1/2 bg-gray-200 dark:bg-neutral-700"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"text-2xl font-semibold mb-2 text-gray-800 dark:text-white",children:a}),r&&(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsxs)("span",{className:"text-[0.6rem] "+(s?"text-green-500 dark:text-green-400":"text-red-500 dark:text-red-400"),children:[s?"\u2191":"\u2193"," ",Math.abs(u)]}),(0,d.jsx)("span",{className:"text-[0.6rem] ml-1 text-gray-500 dark:text-gray-400",children:l})]})]})]})}}}]);