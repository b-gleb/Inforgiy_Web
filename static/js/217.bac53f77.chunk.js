"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[217],{5217:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var n=t(9950),i=t(9500),c=t(9811),s=t(1217),l=t(4414);const r=(0,n.lazy)((()=>t.e(219).then(t.bind(t,8219)))),d=(0,n.lazy)((()=>t.e(497).then(t.bind(t,8497))));function o(e){let{mode:a,branch:t,initDataUnsafe:o,date:u,timeRange:p,onClose:h,setRotaData:m,handleUpdateCell:b}=e;const[f,g]=(0,n.useState)([]),[w,k]=(0,n.useState)([]),[x,y]=(0,n.useState)(""),[A,U]=(0,n.useState)(null);return(0,n.useEffect)((()=>(window.Telegram.WebApp.BackButton.onClick(h),window.Telegram.WebApp.BackButton.show(),()=>{window.Telegram.WebApp.BackButton.offClick(),window.Telegram.WebApp.BackButton.hide()})),[h]),(0,n.useEffect)((()=>{(0,c.A)(t,o).then((e=>{g(e),k(e)})).catch((()=>{}))}),[t,o]),(0,n.useEffect)((()=>{const e=f.filter((e=>e.nick.toLowerCase().includes(x.toLowerCase())));k(e)}),[x,f]),(0,l.jsx)("div",{className:"popup",children:A?null!==(null===A||void 0===A?void 0:A.id)?(0,l.jsx)(n.Suspense,{fallback:null,children:(0,l.jsx)(r,{branch:t,editingUser:A,setEditingUser:U,initDataUnsafe:o})}):(0,l.jsx)(n.Suspense,{fallback:null,children:(0,l.jsx)(d,{branch:t,editingUser:A,setEditingUser:U,initDataUnsafe:o})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:x,onChange:e=>y(e.target.value),className:"input-field mr-2"}),(0,l.jsx)("button",{onClick:()=>h(),className:"p-2 text-[#007aff] text-xl",children:"\u2715"})]}),"user_management"===a&&(0,l.jsx)("button",{className:"button-primary",onClick:()=>{U({id:null,username:"@",color:0}),window.Telegram.WebApp.HapticFeedback.impactOccurred("medium")},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,l.jsx)("div",{className:"search_results_container",children:w.map((e=>(0,l.jsx)(i.P.button,{initial:{opacity:.5,scale:.9},animate:{opacity:1,scale:1,transition:{ease:"easeOut",duration:.2}},onClick:()=>{"rota"===a?((0,s.A)({type:"add",branch:t,date:u,timeRange:p,modifyUserId:e.id,initDataUnsafe:o}).then((e=>{m(e)})).catch((()=>{})),window.Telegram.WebApp.HapticFeedback.impactOccurred("light"),h()):"user_management"===a?(U(e),window.Telegram.WebApp.HapticFeedback.impactOccurred("light")):"rota_weekly"===a&&b({type:"add",branch:t,modifyUserId:e.id,initDataUnsafe:o}).then((()=>{window.Telegram.WebApp.HapticFeedback.impactOccurred("light"),h()})).catch((()=>{}))},className:"search_results_button",children:e.nick},e.id)))})]})})}},9811:(e,a,t)=>{t.d(a,{A:()=>s});var n=t(9246),i=t(9492);const c="https://inforgiy-server.fly.dev";async function s(e,a){try{return(await n.A.get(`${c}/api/users`,{params:{branch:e,initDataUnsafe:a}})).data}catch(t){throw(0,i.A)(t),t}}}}]);