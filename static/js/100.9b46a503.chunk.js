/*! For license information please see 100.9b46a503.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[100],{2100:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var n=t(9950),s=t(9500);const c=(0,t(7101).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var i=t(9246),r=t(6174),l=t(9492),o=t(4414);const d="https://inforgiy-server.fly.dev";function u(e){let{branch:a,editingUser:t,setEditingUser:n,initDataUnsafe:s}=e;const u=e=>{const{name:a,value:t}=e.target;"color"===a&&window.Telegram.WebApp.HapticFeedback.selectionChanged(),n((e=>({...e,[a]:t})))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const c={branch:a,userObj:t,initDataUnsafe:s};try{200===(await i.A.post(`${d}/api/updateUser`,c)).status&&(n(null),window.Telegram.WebApp.HapticFeedback.notificationOccurred("success"),r.oR.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!"))}catch(o){o.response&&404===o.response.status?(r.oR.warn("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!"),window.Telegram.WebApp.HapticFeedback.notificationOccurred("error")):(0,l.A)(o)}},className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"username",className:"form-label",children:"Telegram"}),(0,o.jsx)("input",{type:"text",id:"username",name:"username",value:t.username,onChange:u,required:!0,readOnly:null!==t.id,autoComplete:"off",className:"input-field"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"nick",className:"form-label",children:"\u041d\u0438\u043a"}),(0,o.jsx)("input",{type:"text",id:"nick",name:"nick",value:t.nick,onChange:u,required:!0,autoComplete:"off",className:"input-field"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"color",className:"form-label",children:"\u0426\u0432\u0435\u0442"}),(0,o.jsx)("select",{id:"color",name:"color",value:t.color,onChange:u,className:"input-field",children:Object.entries({0:"\u0421\u0438\u043d\u0438\u0439",1:"\u0417\u0435\u043b\u0451\u043d\u044b\u0439",2:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439",3:"\u0427\u0451\u0440\u043d\u044b\u0439",4:"\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439",5:"\u041e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439",6:"\u0416\u0451\u043b\u0442\u044b\u0439"}).map((e=>{let[a,t]=e;return(0,o.jsx)("option",{value:a,children:t},a)}))})]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[null!==t.id&&(0,o.jsx)("button",{type:"button",className:"button-secondary w-auto",onClick:()=>{(async(e,a,t)=>{try{200===(await i.A.post(`${d}/api/removeUser`,{branch:e,modifyUserId:a,initDataUnsafe:t})).status&&(window.Telegram.WebApp.HapticFeedback.notificationOccurred("success"),r.oR.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0434\u0430\u043b\u0435\u043d"))}catch(n){(0,l.A)(n)}})(a,t.id,s),n(null)},children:(0,o.jsx)(c,{color:"red",size:25})}),(0,o.jsx)("button",{type:"button",onClick:()=>{n(null),window.Telegram.WebApp.HapticFeedback.impactOccurred("light")},className:"button-secondary w-full",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,o.jsx)("button",{type:"submit",className:"button-primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}var p=t(9811),m=t(3215);function h(e){let{mode:a,branch:t,initDataUnsafe:c,date:i,timeRange:r,onClose:l,setRotaData:d}=e;const[h,b]=(0,n.useState)([]),[f,x]=(0,n.useState)([]),[w,g]=(0,n.useState)(""),[k,y]=(0,n.useState)(null);return(0,n.useEffect)((()=>(window.Telegram.WebApp.BackButton.onClick(l),window.Telegram.WebApp.BackButton.show(),()=>{window.Telegram.WebApp.BackButton.offClick(),window.Telegram.WebApp.BackButton.hide()})),[l]),(0,n.useEffect)((()=>{(0,p.A)(t,c).then((e=>{b(e),x(e)})).catch((()=>{}))}),[t,c]),(0,n.useEffect)((()=>{const e=h.filter((e=>e.nick.toLowerCase().includes(w.toLowerCase())));x(e)}),[w,h]),(0,o.jsx)("div",{className:"popup",children:k?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u,{branch:t,editingUser:k,setEditingUser:y,initDataUnsafe:c})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center mb-4",children:[(0,o.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:w,onChange:e=>g(e.target.value),className:"input-field mr-2"}),(0,o.jsx)("button",{onClick:()=>l(),className:"p-2 text-[#007aff] text-xl",children:"\u2715"})]}),"user_management"===a&&(0,o.jsx)("button",{className:"button-primary",onClick:()=>{y({id:null,username:"@",color:0}),window.Telegram.WebApp.HapticFeedback.impactOccurred("medium")},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,o.jsx)("div",{className:"search_results_container",children:f.map((e=>(0,o.jsx)(s.P.button,{initial:{opacity:.5,scale:.9},animate:{opacity:1,scale:1,transition:{ease:"easeOut",duration:.2}},onClick:()=>{"rota"===a?((0,m.A)("add",t,i,r,e.id,c).then((e=>{d(e)})).catch((()=>{})),window.Telegram.WebApp.HapticFeedback.impactOccurred("light"),l()):"user_management"===a&&(y(e),window.Telegram.WebApp.HapticFeedback.impactOccurred("light"))},className:"search_results_button",children:e.nick},e.id)))})]})})}},9811:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(9246),s=t(9492);const c="https://inforgiy-server.fly.dev";async function i(e,a){try{return(await n.A.get(`${c}/api/users`,{params:{branch:e,initDataUnsafe:a}})).data}catch(t){throw(0,s.A)(t),t}}}}]);