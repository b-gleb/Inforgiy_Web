import{c as f,j as e,a as d,y as l,b as p}from"./index-CVODSqiP.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],j=f("trash-2",y),m="https://inforgiy-server.fly.dev";function v({branch:i,editingUser:t,setEditingUser:n,initDataUnsafe:u}){const h={0:"Синий",1:"Зелёный",2:"Красный",3:"Чёрный",4:"Фиолетовый",5:"Оранжевый",6:"Жёлтый"},o=a=>{const{name:s,value:c}=a.target;s==="color"&&window.Telegram.WebApp.HapticFeedback.selectionChanged(),n(r=>({...r,[s]:c}))},x=async(a,s,c)=>{try{(await d.post(`${m}/api/removeUser`,{branch:a,modifyUserId:s,initDataUnsafe:c})).status===200&&(window.Telegram.WebApp.HapticFeedback.notificationOccurred("success"),l.success("Пользователь удален"))}catch(r){p(r)}},b=async a=>{a.preventDefault();const s={branch:i,userObj:t,initDataUnsafe:u};try{(await d.post(`${m}/api/updateUser`,s)).status===200&&(n(null),window.Telegram.WebApp.HapticFeedback.notificationOccurred("success"),l.success("Пользователь обновлен!"))}catch(c){c.response&&c.response.status===404?(l.warn("Пользователь не найден!"),window.Telegram.WebApp.HapticFeedback.notificationOccurred("error")):p(c)}};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Telegram"}),e.jsx("input",{type:"text",id:"username",name:"username",value:t.username,onChange:o,required:!0,readOnly:t.id!==null,autoComplete:"off",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nick",className:"form-label",children:"Ник"}),e.jsx("input",{type:"text",id:"nick",name:"nick",value:t.nick,onChange:o,required:!0,autoComplete:"off",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"color",className:"form-label",children:"Цвет"}),e.jsx("select",{id:"color",name:"color",value:t.color,onChange:o,className:"input-field",children:Object.entries(h).map(([a,s])=>e.jsx("option",{value:a,children:s},a))})]}),e.jsxs("div",{className:"flex space-x-2",children:[t.id!==null&&e.jsx("button",{type:"button",className:"button-secondary w-auto",onClick:()=>{x(i,t.id,u),n(null)},children:e.jsx(j,{color:"red",size:25})}),e.jsx("button",{type:"button",onClick:()=>{n(null),window.Telegram.WebApp.HapticFeedback.impactOccurred("light")},className:"button-secondary w-full",children:"Отменить"}),e.jsx("button",{type:"submit",className:"button-primary",children:"Сохранить"})]})]})})}export{v as default};
